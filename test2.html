<!DOCTYPE html>
<html ng-app='app'>
<head lang="en">
	<title>test2</title>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>

	<!--<script src="bower_components/modernizr/modernizr.js"></script>-->
	<!--<base href="https://developer.mozilla.org/samples/cssref/">-->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>test</title>
	<link rel="stylesheet" href="bower_components/bootstrap/less/bootstrap.css">
	<link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.css">
	<link rel="stylesheet" href="less/test2.css">
	<script src="bower_components/lodash/lodash.js"></script>
	<script src="bower_components/numeral/numeral.js"></script>
	<script src="bower_components/jquery/dist/jquery.js"></script>
	<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
	<script src="bower_components/angular/angular.js"></script>
	<script src="bower_components/restangular/dist/restangular.js"></script>
	<script src="bower_components/angular-ui-router/release/angular-ui-router.js"></script>

	<style>



	</style>
</head>
<body ng-controller="ctrl" class="container-fluid">

main name: {{name}}<br>
<div outer>
	transclude name: {{name}}<br>
	<div inner>
		inner name: {{name}}
	</div>
</div>

<script>


	var app = angular.module('app', ['restangular', 'ui.router']);


	app.run(function ($rootScope, $location) {
		$rootScope.$location = $location;
	})
	app.config(function(RestangularProvider, $stateProvider, $urlRouterProvider) {
	})
	app.directive('outer', function() {
		return {
			scope: true,
			transclude: true,
			template: 'outer name: {{name}}<br><div ng-transclude></div>',
			link: function($scope, elem, attr) {
				$scope.name = 'outer';

			}
		}
	})
	app.directive('inner', function() {
		return {
			scope: true,
			link: function($scope, elem, attr) {
				$scope.name = 'inner';
				$scope.$on('refresh', function() {
					console.log('refresh3');
				})

			}
		}
	})



	app.controller('ctrl', function ($scope, $state, $stateParams, Restangular, $location) {
		//$scope.name = 'main';
		$scope.click = function() {
			$scope.$broadcast('refresh');
		}
	})
</script>
</body>
</html>